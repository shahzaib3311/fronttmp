{"ast":null,"code":"import React,{createContext,useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export const UserContext=/*#__PURE__*/createContext();export const UserProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const BACKEND_API_URL=process.env.BACKEND_API_URL;useEffect(()=>{const whomai=async()=>{try{const response=await axios.get(\"https://api.dripsaint.com/api/whoami/\",{withCredentials:true});console.log(response.data);// Log the response to the console\nsetUser(response.data.user||\"No User\");// Ensure orders is an array\nsetLoading(false);}catch(error){console.error(error.message);setLoading(false);// Set loading to false even on error\n}};whomai();// Call the async function\n},[]);return/*#__PURE__*/_jsx(UserContext.Provider,{value:{user,setUser,loading},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","axios","jsx","_jsx","UserContext","UserProvider","_ref","children","user","setUser","loading","setLoading","BACKEND_API_URL","process","env","whomai","response","get","withCredentials","console","log","data","error","message","Provider","value"],"sources":["/tmp/build_e49e86bd/src/auth/UserContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const UserContext = createContext();\r\n\r\nexport const UserProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const BACKEND_API_URL = process.env.BACKEND_API_URL\r\n  useEffect(() => {\r\n    const whomai = async () => {\r\n      try {\r\n        const response = await axios.get(`https://api.dripsaint.com/api/whoami/`, {\r\n          withCredentials: true,\r\n        });\r\n        console.log(response.data); // Log the response to the console\r\n        setUser(response.data.user || \"No User\"); // Ensure orders is an array\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(error.message);\r\n        setLoading(false); // Set loading to false even on error\r\n      }\r\n    };\r\n\r\n    whomai(); // Call the async function\r\n  }, []);\r\n\r\n  return (\r\n    <UserContext.Provider value={{ user,setUser ,loading }}>\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1B,MAAO,MAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAAAa,eAAe,CAAGC,OAAO,CAACC,GAAG,CAACF,eAAe,CACnDZ,SAAS,CAAC,IAAM,CACd,KAAM,CAAAe,MAAM,CAAG,KAAAA,CAAA,GAAY,CACzB,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAf,KAAK,CAACgB,GAAG,yCAA0C,CACxEC,eAAe,CAAE,IACnB,CAAC,CAAC,CACFC,OAAO,CAACC,GAAG,CAACJ,QAAQ,CAACK,IAAI,CAAC,CAAE;AAC5BZ,OAAO,CAACO,QAAQ,CAACK,IAAI,CAACb,IAAI,EAAI,SAAS,CAAC,CAAE;AAC1CG,UAAU,CAAC,KAAK,CAAC,CACnB,CAAE,MAAOW,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAACA,KAAK,CAACC,OAAO,CAAC,CAC5BZ,UAAU,CAAC,KAAK,CAAC,CAAE;AACrB,CACF,CAAC,CAEDI,MAAM,CAAC,CAAC,CAAE;AACZ,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEZ,IAAA,CAACC,WAAW,CAACoB,QAAQ,EAACC,KAAK,CAAE,CAAEjB,IAAI,CAACC,OAAO,CAAEC,OAAQ,CAAE,CAAAH,QAAA,CACpDA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}