{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import queryString from\"query-string\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SocialAuth=()=>{let location=useLocation();console.log(\"location\",location);const[error,setError]=useState(\"\");const navigate=useNavigate();useEffect(()=>{const values=queryString.parse(location.search);const code=values.code?values.code:null;if(code){onGogglelogin();}},[]);const googleLoginHandler=code=>{console.log(process.env.BACKEND_API_URL,process.env.REACT_APP_GOGGLE_REDIRECT_URL_ENDPOINT,process.env.REACT_APP_GOOGLE_CLIENT_ID);return axios.get(\"https://api.dripsaint.com/api/auth/\".concat(code)).then(res=>{localStorage.setItem(\"user\",res.data.user.email);return res.data;}).catch(err=>{setError(err);return err;});};const onGogglelogin=async()=>{const response=await googleLoginHandler(location.search);if(response.ok){navigate(\"/\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex h-screen w-screen items-center justify-center\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"flex items-center rounded-lg bg-green-700 px-4 py-2 text-white\",disabled:true,children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"mr-3 h-5 w-5 animate-spin text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\" Processing... \"})]})});};export default SocialAuth;","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","queryString","axios","jsx","_jsx","jsxs","_jsxs","SocialAuth","location","console","log","error","setError","navigate","values","parse","search","code","onGogglelogin","googleLoginHandler","process","env","BACKEND_API_URL","REACT_APP_GOGGLE_REDIRECT_URL_ENDPOINT","REACT_APP_GOOGLE_CLIENT_ID","get","concat","then","res","localStorage","setItem","data","user","email","catch","err","response","ok","className","children","type","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d"],"sources":["/tmp/build_e49e86bd/src/auth/SocialAuth.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\nimport axios from \"axios\";\r\n\r\nconst SocialAuth = () => {\r\n  let location = useLocation();\r\n  console.log(\"location\", location);\r\n  const [error, setError] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const values = queryString.parse(location.search);\r\n    const code = values.code ? values.code : null;\r\n\r\n    if (code) {\r\n      onGogglelogin();\r\n    }\r\n  }, []);\r\n\r\n  const googleLoginHandler = (code) => {\r\n    console.log(process.env.BACKEND_API_URL,process.env.REACT_APP_GOGGLE_REDIRECT_URL_ENDPOINT,process.env.REACT_APP_GOOGLE_CLIENT_ID)\r\n    return axios\r\n      .get(`https://api.dripsaint.com/api/auth/${code}`)\r\n      .then((res) => {\r\n        localStorage.setItem(\"user\", res.data.user.email);\r\n        return res.data;\r\n      })\r\n      .catch((err) => {\r\n        setError(err);\r\n        return err;\r\n      });\r\n  };\r\n\r\n  const onGogglelogin = async () => {\r\n    const response = await googleLoginHandler(location.search);\r\n    if (response.ok) {\r\n      navigate(\"/\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen w-screen items-center justify-center\">\r\n      <button type=\"button\" className=\"flex items-center rounded-lg bg-green-700 px-4 py-2 text-white\" disabled>\r\n        <svg className=\"mr-3 h-5 w-5 animate-spin text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n          <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n          <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n        </svg>\r\n        <span className=\"font-medium\"> Processing... </span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SocialAuth;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,MAAO,CAAAC,WAAW,KAAM,cAAc,CACtC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAI,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC5BU,OAAO,CAACC,GAAG,CAAC,UAAU,CAAEF,QAAQ,CAAC,CACjC,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAe,QAAQ,CAAGb,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,MAAM,CAAGb,WAAW,CAACc,KAAK,CAACP,QAAQ,CAACQ,MAAM,CAAC,CACjD,KAAM,CAAAC,IAAI,CAAGH,MAAM,CAACG,IAAI,CAAGH,MAAM,CAACG,IAAI,CAAG,IAAI,CAE7C,GAAIA,IAAI,CAAE,CACRC,aAAa,CAAC,CAAC,CACjB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,kBAAkB,CAAIF,IAAI,EAAK,CACnCR,OAAO,CAACC,GAAG,CAACU,OAAO,CAACC,GAAG,CAACC,eAAe,CAACF,OAAO,CAACC,GAAG,CAACE,sCAAsC,CAACH,OAAO,CAACC,GAAG,CAACG,0BAA0B,CAAC,CAClI,MAAO,CAAAtB,KAAK,CACTuB,GAAG,uCAAAC,MAAA,CAAuCT,IAAI,CAAE,CAAC,CACjDU,IAAI,CAAEC,GAAG,EAAK,CACbC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEF,GAAG,CAACG,IAAI,CAACC,IAAI,CAACC,KAAK,CAAC,CACjD,MAAO,CAAAL,GAAG,CAACG,IAAI,CACjB,CAAC,CAAC,CACDG,KAAK,CAAEC,GAAG,EAAK,CACdvB,QAAQ,CAACuB,GAAG,CAAC,CACb,MAAO,CAAAA,GAAG,CACZ,CAAC,CAAC,CACN,CAAC,CAED,KAAM,CAAAjB,aAAa,CAAG,KAAAA,CAAA,GAAY,CAChC,KAAM,CAAAkB,QAAQ,CAAG,KAAM,CAAAjB,kBAAkB,CAACX,QAAQ,CAACQ,MAAM,CAAC,CAC1D,GAAIoB,QAAQ,CAACC,EAAE,CAAE,CACfxB,QAAQ,CAAC,GAAG,CAAC,CACf,CACF,CAAC,CAED,mBACET,IAAA,QAAKkC,SAAS,CAAC,oDAAoD,CAAAC,QAAA,cACjEjC,KAAA,WAAQkC,IAAI,CAAC,QAAQ,CAACF,SAAS,CAAC,gEAAgE,CAACG,QAAQ,MAAAF,QAAA,eACvGjC,KAAA,QAAKgC,SAAS,CAAC,sCAAsC,CAACI,KAAK,CAAC,4BAA4B,CAACC,IAAI,CAAC,MAAM,CAACC,OAAO,CAAC,WAAW,CAAAL,QAAA,eACtHnC,IAAA,WAAQkC,SAAS,CAAC,YAAY,CAACO,EAAE,CAAC,IAAI,CAACC,EAAE,CAAC,IAAI,CAACC,CAAC,CAAC,IAAI,CAACC,MAAM,CAAC,cAAc,CAACC,WAAW,CAAC,GAAG,CAAS,CAAC,cACrG7C,IAAA,SAAMkC,SAAS,CAAC,YAAY,CAACK,IAAI,CAAC,cAAc,CAACO,CAAC,CAAC,iHAAiH,CAAO,CAAC,EACzK,CAAC,cACN9C,IAAA,SAAMkC,SAAS,CAAC,aAAa,CAAAC,QAAA,CAAC,iBAAe,CAAM,CAAC,EAC9C,CAAC,CACN,CAAC,CAEV,CAAC,CAED,cAAe,CAAAhC,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}