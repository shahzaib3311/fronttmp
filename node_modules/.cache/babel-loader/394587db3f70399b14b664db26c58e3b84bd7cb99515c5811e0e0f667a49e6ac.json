{"ast":null,"code":"import React,{useState,useEffect,useContext}from\"react\";import Layout from\"../Components/Layout\";import axios from\"axios\";import{UserContext}from\"../auth/UserContext\";import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminOrders=()=>{const navigate=useNavigate();const{user,loading}=useContext(UserContext);if(!loading&&user==null){document.location.href=\"/login\";}if(!loading&&user!=null&&!user.is_superuser){document.location.href=\"/login\";}const[orders,setOrders]=useState([]);const[isLoading,setIsLoading]=useState(true);// Effect hook to fetch data when component mounts\nuseEffect(()=>{const fetchData=async()=>{try{const response=await axios.get(\"https://api.dripsaint.com/api/get_all_orders/\",{withCredentials:true});console.log(response.data);// Log the response to the console\nsetOrders(response.data.orders||[]);// Ensure orders is an array\nsetIsLoading(false);}catch(error){console.error(error.message);setIsLoading(false);// Set loading to false even on error\n}};fetchData();// Call the async function\n},[]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show a loading state while data is being fetched\n}const handleRowClick=orderId=>{navigate(\"/order/\".concat(orderId));// Navigate to order details page\n};return/*#__PURE__*/_jsxs(Layout,{background:\"bg-gradient-to-r from-stone-500 to-stone-700\",children:[/*#__PURE__*/_jsx(\"section\",{className:\"mt-14 w-full p-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table text-white\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"text-white text-2xl\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Customer Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Order Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Payment Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map((order,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover\",onClick:()=>handleRowClick(order.id),children:[/*#__PURE__*/_jsx(\"th\",{children:order.id}),/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(order.user.first_name,\" \").concat(order.user.last_name)}),/*#__PURE__*/_jsx(\"td\",{children:new Date(order.order_date).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{children:order.paymenttype}),/*#__PURE__*/_jsx(\"td\",{children:order.totalPrice})]},index))})]})})}),/*#__PURE__*/_jsx(\"dialog\",{id:\"add_order_modal\",className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-box w-11/12 max-w-5xl\",children:[/*#__PURE__*/_jsx(\"form\",{method:\"dialog\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-circle btn-ghost absolute right-2 top-2\",children:\"\\u2715\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg mb-2\",children:\"Order Details\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-col-1 sm:grid-cols-2 gap-2\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\",children:[\"ID\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"grow\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\",children:[\"Customer Name\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\",children:[\"Order Date\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\",children:[\"Payment Type\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"\"})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\",children:[\"Total Price\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"\"})]})]})]})})]});};export default AdminOrders;","map":{"version":3,"names":["React","useState","useEffect","useContext","Layout","axios","UserContext","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminOrders","navigate","user","loading","document","location","href","is_superuser","orders","setOrders","isLoading","setIsLoading","fetchData","response","get","withCredentials","console","log","data","error","message","children","handleRowClick","orderId","concat","background","className","map","order","index","onClick","id","first_name","last_name","Date","order_date","toLocaleString","paymenttype","totalPrice","method","type"],"sources":["/tmp/build_e49e86bd/src/pages/AdminOrders.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport Layout from \"../Components/Layout\";\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"../auth/UserContext\";\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst AdminOrders = () => {\r\n  const navigate = useNavigate(); \r\n  const { user, loading } = useContext(UserContext);\r\n\r\n  if (!loading && user == null) {\r\n    document.location.href = \"/login\";\r\n  }\r\n\r\n  if (!loading && user != null && !user.is_superuser) {\r\n    document.location.href = \"/login\";\r\n  }\r\n  const [orders, setOrders] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // Effect hook to fetch data when component mounts\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `https://api.dripsaint.com/api/get_all_orders/`,\r\n          {\r\n            withCredentials: true,\r\n          }\r\n        );\r\n        console.log(response.data); // Log the response to the console\r\n        setOrders(response.data.orders || []); // Ensure orders is an array\r\n        setIsLoading(false);\r\n      } catch (error) {\r\n        console.error(error.message);\r\n        setIsLoading(false); // Set loading to false even on error\r\n      }\r\n    };\r\n\r\n    fetchData(); // Call the async function\r\n  }, []);\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>; // Show a loading state while data is being fetched\r\n  }\r\n  const handleRowClick = (orderId) => {\r\n    navigate(`/order/${orderId}`); // Navigate to order details page\r\n  };\r\n\r\n  return (\r\n    <Layout background=\"bg-gradient-to-r from-stone-500 to-stone-700\">\r\n      <section className=\"mt-14 w-full p-8\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"table text-white\">\r\n            {/* head */}\r\n            <thead>\r\n              <tr className=\"text-white text-2xl\">\r\n                <th>ID</th>\r\n                <th>Customer Name</th>\r\n                <th>Order Date</th>\r\n                <th>Payment Type</th>\r\n                <th>Total Price</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {orders.map((order, index) => (\r\n                <tr key={index} className=\"hover\" onClick={() => handleRowClick(order.id)}>\r\n                  <th>{order.id}</th>\r\n                  <td>{`${order.user.first_name} ${order.user.last_name}`}</td>\r\n                  <td>{new Date(order.order_date).toLocaleString()}</td>\r\n                  <td>{order.paymenttype}</td>\r\n                  <td>{order.totalPrice}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </section>\r\n\r\n      <dialog id=\"add_order_modal\" className=\"modal\">\r\n        <div className=\"modal-box w-11/12 max-w-5xl\">\r\n          <form method=\"dialog\">\r\n            <button className=\"btn btn-sm btn-circle btn-ghost absolute right-2 top-2\">\r\n              âœ•\r\n            </button>\r\n          </form>\r\n\r\n          <h3 className=\"font-bold text-lg mb-2\">Order Details</h3>\r\n          <div className=\"grid grid-col-1 sm:grid-cols-2 gap-2\">\r\n            <label className=\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\">\r\n              ID\r\n              <input type=\"text\" className=\"grow\" />\r\n            </label>\r\n            <label className=\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\">\r\n              Customer Name\r\n              <input type=\"text\" className=\"\" />\r\n            </label>\r\n            <label className=\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\">\r\n              Order Date\r\n              <input type=\"text\" className=\"\" />\r\n            </label>\r\n            <label className=\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\">\r\n              Payment Type\r\n              <input type=\"text\" className=\"\" />\r\n            </label>\r\n            <label className=\"w-2/3 sm:w-full sm:max-w-none input input-bordered flex items-center gap-2\">\r\n              Total Price\r\n              <input type=\"text\" className=\"\" />\r\n            </label>\r\n          </div>\r\n        </div>\r\n      </dialog>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminOrders;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}